<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="All updates, fixes and notes for the bot ‚Äî organized by version/date and easy to navigate."
    />
    <meta property="og:title" content="Bot Changelog ‚Äî The Lunar Archive" />
    <meta
      property="og:description"
      content="All updates, fixes and notes for the bot ‚Äî organized by version/date and easy to navigate."
    />
    <meta property="og:image" content="" />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://reaperwatch.github.io/The-Lunar-Archive/changelog.html"
    />
    <meta name="theme-color" content="#cb686b" />
    <title>Bot Changelog ‚Äî The Lunar Archive</title>
    <link rel="stylesheet" href="changelog-style.css" />

    <link
      rel="shortcut icon"
      href="https://reaperwatch.github.io/favicon.ico"
    />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://reaperwatch.github.io/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="https://reaperwatch.github.io/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="https://reaperwatch.github.io/favicon-16x16.png"
    />
    <link
      rel="manifest"
      href="https://reaperwatch.github.io/site.webmanifest"
    />
    <link
      rel="sitemap"
      type="application/xml"
      title="Sitemap"
      href="https://reaperwatch.github.io/sitemap.xml"
    />
  </head>
  <body>
    <main class="wrap">
      <header class="ch-header">
        <h1>Bot Changelog</h1>
        <p class="subtitle">
          All updates, fixes and notes for the bot ‚Äî organized by version/date
          and easy to navigate (time by UTC +0). <br />
          <code>Please use "/bug-report" to help improve the bot.</code>
        </p>
        <div class="actions">
          <input
            id="search"
            placeholder="Search changes, versions, or keywords"
            aria-label="Search changelog"
          />
          <a class="btn" href="update logs bot/updatelog.html"
            >View raw update logs</a
          >
        </div>
      </header>

      <div class="layout">
        <nav id="toc" class="toc" aria-label="Change list navigation"></nav>

        <section class="content" id="entries">
          <!-- changelog entries below -->
          <!-- initial public release -->
          <!-- hotfix-->
          <!-- stable release-->

          <article id="v2.0.0" class="changelog-entry">
            <header>
              <h2>v2.0.0 ‚Äî 2026-01-30 (5:56 pm)</h2>
              <div class="meta">major update</div>
            </header>
            <ul>
              <li>
                <strong>Added:</strong> <code>/connect-four</code> game command
                AND a
                <a
                  href="./dashboard.html"
                  style="
                    background: linear-gradient(90deg, #e4a2a4, #cb686b);
                    -webkit-background-clip: text;
                    background-clip: text;
                    -webkit-text-fill-color: transparent;
                  "
                  >dashboard</a
                >
                to manage your database data just as shown
                <a
                  href="./terms and policy/info/data.html"
                  style="
                    background: linear-gradient(90deg, #e4a2a4, #cb686b);
                    -webkit-background-clip: text;
                    background-clip: text;
                    -webkit-text-fill-color: transparent;
                  "
                  >here</a
                >!
                <div class="thumbs">
                  <figure class="thumb-figure">
                    <img
                      class="thumb"
                      src="update%20logs%20bot/logimgs/2.0.0/newdashboard.png"
                      alt="NEW dashboard webpage!"
                      data-caption="NEW dashboard webpage!"
                    />
                    <figcaption>NEW dashboard webpage!</figcaption>
                  </figure>
                  <figure class="thumb-figure">
                    <img
                      class="thumb"
                      src="update%20logs%20bot/logimgs/2.0.0/c4.mp4"
                      alt="video of connect four gameplay"
                      data-caption="video of connect four gameplay"
                    />
                    <figcaption>video of connect four gameplay</figcaption>
                  </figure>
                </div>
              </li>
            </ul>
          </article>

          <article id="v1.0.1" class="changelog-entry">
            <header>
              <h2>v1.0.1 ‚Äî 2026-01-08 (12:56 pm)</h2>
              <div class="meta">hotfix</div>
            </header>
            <ul>
              <li>
                <strong>Patched/fixed bug:</strong> Fixed
                <code>"/cat"</code> backup Image when both API's gifs fail
                inside DMs.
                <div class="thumbs">
                  <figure class="thumb-figure">
                    <img
                      class="thumb"
                      src="update%20logs%20bot/logimgs/1.0.1/dmfix.png"
                      alt="Backup Image working correctly"
                      data-caption="backup Image working correctly"
                    />
                    <figcaption>Backup Image working correctly</figcaption>
                  </figure>
                  <figure class="thumb-figure">
                    <img
                      class="thumb"
                      src="update%20logs%20bot/logimgs/1.0.1/dmfail.png"
                      alt="backup image not showing in dms (before fix)"
                      data-caption="backup image not showing in dms (before fix)"
                    />
                    <figcaption>
                      backup image not showing in dms (before fix)
                    </figcaption>
                  </figure>
                </div>
              </li>
            </ul>
          </article>

          <article id="v1.0.0" class="changelog-entry">
            <header>
              <h2>v1.0.0 ‚Äî 2026-01-07 (6:36 pm)</h2>
              <div class="meta">
                initial public release of web page<!-- as of creating this web page NOT bot!-->
              </div>
            </header>
            <ul>
              <li>
                <strong>Added:</strong> A second API to <code>"/cat"</code> to
                reduce possible server side errors.
                <div class="thumbs">
                  <figure class="thumb-figure">
                    <img
                      class="thumb"
                      src="update%20logs%20bot/logimgs/1.0.0/cat%20api%20new.png"
                      alt="Cat API (new)"
                      data-caption="Cat API (new)"
                    />
                    <figcaption>Cat API (new)</figcaption>
                  </figure>
                  <figure class="thumb-figure">
                    <img
                      class="thumb"
                      src="update%20logs%20bot/logimgs/1.0.0/cat%20api%20old.png"
                      alt="Cat API (old)"
                      data-caption="Cat API (old)"
                    />
                    <figcaption>Cat API (old)</figcaption>
                  </figure>
                </div>
              </li>
              <li>
                <strong>Updated:</strong> Server join messages from the bot
                (only occurs on Josh's server).
                <div class="thumbs">
                  <figure class="thumb-figure">
                    <img
                      class="thumb"
                      src="update%20logs%20bot/logimgs/1.0.0/joinmsg.png"
                      alt="Join Message"
                      data-caption="Join Message Screenshot"
                    />
                    <figcaption>Join Message</figcaption>
                  </figure>
                </div>
              </li>
              <li>
                <strong>Known bugs:</strong> <code>"/cat"</code>'s backup image
                when both API's gifs fail is still bugged inside DMs.
                <div class="thumbs">
                  <figure class="thumb-figure">
                    <img
                      class="thumb"
                      src="update%20logs%20bot/logimgs/1.0.0/dm%20fail.png"
                      alt="DM Fail"
                      data-caption="DM Fail Screenshot"
                    />
                    <figcaption>DM Fail</figcaption>
                  </figure>
                </div>
              </li>
            </ul>
          </article>

          <!-- added spacing in code for comfort, end of entries!-->
        </section>
      </div>

      <footer class="ch-footer">
        <div>
          <a class="back" href="index.html">‚Üê Back to Home</a>
          <a class="back" href="bot.html">‚Üê Back to Bot</a>
        </div>
        <span>Made by slashing__moon ‚Ä¢ The Lunar Archive</span>
      </footer>
    </main>

    <div id="img-modal" class="img-modal" aria-hidden="true">
      <div class="box">
        <button class="close" id="img-modal-close" aria-label="Close image">
          ‚úï
        </button>
        <img id="img-modal-img" src="" alt="" style="display: none" />
        <video
          id="img-modal-video"
          controls
          preload="metadata"
          poster=""
          style="display: none; max-width: 100%; height: auto"
        ></video>
        <div id="img-modal-controls" style="display: none; margin-top: 8px">
          <button id="video-play" type="button">Play</button>
          <input
            id="video-progress"
            type="range"
            min="0"
            max="0"
            value="0"
            step="0.1"
            style="width: 60%; margin-left: 8px"
          />
        </div>
        <div class="caption" id="img-modal-caption"></div>
      </div>
    </div>

    <!-- in-page video player overlay (opens videos in-place without navigating away) -->
    <div
      id="video-player-overlay"
      style="
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.85);
        align-items: center;
        justify-content: center;
        z-index: 9999;
      "
      aria-hidden="true"
    >
      <div
        class="box"
        style="
          position: relative;
          max-width: 90%;
          max-height: 90%;
          width: 100%;
          display: flex;
          flex-direction: column;
          align-items: center;
        "
      >
        <button class="close" id="overlay-close" aria-label="Close video">
          ‚úï
        </button>
        <video
          id="overlay-video"
          controls
          preload="metadata"
          poster=""
          style="
            object-fit: contain;
            width: auto;
            height: auto;
            max-width: calc(85vw - 48px);
            max-height: calc(85vh - 96px);
            background: #000;
          "
        ></video>
        <div
          id="overlay-caption"
          style="color: #fff; margin-top: 8px; text-align: center"
        ></div>
      </div>
    </div>

    <script>
      (function () {
        const entries = Array.from(
          document.querySelectorAll(".changelog-entry"),
        );
        const toc = document.getElementById("toc");
        const search = document.getElementById("search");

        // disable thumbnail transitions until first user interaction
        if (document && document.body)
          document.body.classList.add("no-thumb-transitions");

        function buildTOC() {
          if (!toc) return;
          toc.innerHTML = "";
          entries.forEach((el) => {
            const title = el.querySelector("h2")?.textContent || "entry";
            const id = el.id;
            const a = document.createElement("a");
            a.href = "#" + id;
            a.textContent = title;
            a.className = "toc-link";
            toc.appendChild(a);
          });
        }

        function filter(q) {
          const ql = q.trim().toLowerCase();
          entries.forEach((el) => {
            const txt = el.textContent.toLowerCase();
            const show = ql === "" || txt.includes(ql);
            el.style.display = show ? "" : "none";
          });
        }

        // build TOC first to link toc items to entries
        buildTOC();

        const contentEl = document.querySelector(".content");
        function syncTOC(animate = true) {
          if (!toc || !contentEl) return;

          // find target height for the TOC. (ts took me like.. uhh 30 minutes to figure this out)
          const tocRect = toc.getBoundingClientRect();
          const scrollY = window.scrollY || window.pageYOffset;
          const tocTopAbs = tocRect.top + scrollY;

          const doc = document.documentElement || document.body;
          const docBottom = Math.max(
            document.documentElement.scrollHeight || 0,
            document.body.scrollHeight || 0,
          );

          const padding = 24;
          const target = Math.max(docBottom - tocTopAbs - padding, 200);

          if (!animate) {
            toc.style.maxHeight = target + "px";
            return;
          }

          // measure current visible maxHeight (fall back to clientHeight)
          let current = toc.clientHeight || 0;
          const computed = window.getComputedStyle(toc).maxHeight;
          if (computed && computed !== "none") {
            const parsed = parseFloat(computed);
            if (!Number.isNaN(parsed)) current = parsed;
          }

          // set starting point then animate to target for smooth growth
          toc.style.maxHeight = current + "px";
          requestAnimationFrame(() => {
            toc.style.maxHeight = target + "px";
            toc.classList.add("slide-down");
            window.clearTimeout(toc._slideTimeout);
            toc._slideTimeout = setTimeout(
              () => toc.classList.remove("slide-down"),
              700,
            );
          });
        }

        syncTOC();
        window.addEventListener("resize", syncTOC);

        entries.forEach((el, i) => {
          el.style.animationDelay = `${i * 70}ms`;

          // if data-img attribute, add "view image" button (adding these comments so I don't forget üò≠)
          const imgSrc = el.dataset.img;
          const hdr = el.querySelector("header");
          if (imgSrc) {
            const btn = document.createElement("button");
            btn.className = "img-btn";
            btn.type = "button";
            btn.textContent = "View Image";
            btn.dataset.img = imgSrc;
            const caption = el.querySelector(".meta")?.textContent || "";
            btn.dataset.caption = caption;
            hdr.appendChild(btn);
          }

          const thumbsList = Array.from(el.querySelectorAll(".thumbs"));
          // convert any thumbnails that are actually videos: move src -> data-img and use a lightweight SVG placeholder (I didn't code ts  I stole it)
          (function convertVideoThumbs() {
            const videoRE = /\.(mp4|webm|ogg)(\?|$)/i;
            thumbsList.forEach((t) => {
              const imgs = Array.from(t.querySelectorAll("img.thumb"));
              imgs.forEach((img) => {
                try {
                  const src = img.getAttribute("src") || "";
                  if (videoRE.test(src)) {
                    img.dataset.img = src;
                    // prefer a -Cover.jpg poster next to the video (e.g. c4.mp4 -> c4-Cover.jpg)
                    const poster = src.replace(
                      /\.(mp4|webm|ogg)(\?|$)/i,
                      "-Cover.jpg",
                    );
                    img.setAttribute("src", poster);
                    img.setAttribute("loading", "lazy");
                  }
                } catch (err) {}
              });
            });
          })();
          if (thumbsList.length > 0) {
            const tocLink = toc.querySelector(`a[href="#${el.id}"]`);
            // start CLOSED by default for all thumbs
            thumbsList.forEach((t) => {
              t.classList.add("collapsed");
              t.style.maxHeight = "0";
            });
            el.classList.remove("expanded");
            if (tocLink) tocLink.classList.remove("expanded");

            const toggle = document.createElement("button");
            toggle.type = "button";
            toggle.className = "img-toggle";
            toggle.textContent = "Show media";
            toggle.setAttribute("aria-pressed", "true");
            hdr.appendChild(toggle);

            function openThumbs() {
              // enable thumbnail transitions on first user interaction
              requestAnimationFrame(() =>
                document.body.classList.remove("no-thumb-transitions"),
              );

              // open each thumbs container and measure its natural height
              requestAnimationFrame(() => {
                thumbsList.forEach((t) => {
                  t.classList.remove("collapsed");
                  // clear inline maxHeight to allow measurement
                  t.style.maxHeight = "";
                  const full = t.scrollHeight;
                  // set measured height to animate
                  t.style.maxHeight = full + "px";
                });
                el.classList.add("expanded");
                if (tocLink) tocLink.classList.add("expanded");
                toggle.textContent = "Hide media";
                toggle.setAttribute("aria-pressed", "false");
                // sync TOC and wait for images to load for accurate height
                setTimeout(() => syncTOC(true), 24);
                // if any images inside this entry are still loading, wait for them
                const imgs = Array.from(el.querySelectorAll("img"));
                const pending = imgs.filter((img) => !img.complete);
                if (pending.length) {
                  let remaining = pending.length;
                  pending.forEach((img) => {
                    img.addEventListener("load", () => {
                      remaining -= 1;
                      if (remaining === 0) syncTOC(true);
                    });
                  });
                } else {
                  setTimeout(syncTOC, 180);
                }
              });
            }

            function closeThumbs() {
              // close all thumbs smoothly
              thumbsList.forEach((t) => {
                // set current height then collapse to 0 for the sexy transition
                const full = t.scrollHeight;
                t.style.maxHeight = full + "px";
                requestAnimationFrame(() => {
                  t.style.maxHeight = "0";
                  t.classList.add("collapsed");
                });
              });
              el.classList.remove("expanded");
              if (tocLink) tocLink.classList.remove("expanded");
              toggle.textContent = "Show media";
              toggle.setAttribute("aria-pressed", "true");
              // sync after the animation finishes
              setTimeout(syncTOC, 460);
            }

            toggle.addEventListener("click", () => {
              // if first thumbs is collapsed, consider all collapsed
              if (thumbsList[0].classList.contains("collapsed")) openThumbs();
              else closeThumbs();
            });
          }
        });

        const modal = document.getElementById("img-modal");
        const modalImg = document.getElementById("img-modal-img");
        const modalVideo = document.getElementById("img-modal-video");
        const modalCap = document.getElementById("img-modal-caption");
        const modalClose = document.getElementById("img-modal-close");
        const vControls = document.getElementById("img-modal-controls");
        const vPlay = document.getElementById("video-play");
        const vProgress = document.getElementById("video-progress");
        // overlay player elements
        const overlay = document.getElementById("video-player-overlay");
        const overlayVideo = document.getElementById("overlay-video");
        const overlayClose = document.getElementById("overlay-close");
        const overlayCap = document.getElementById("overlay-caption");

        function showOverlay(src, poster, caption) {
          try {
            overlayVideo.src = src;
            if (poster) overlayVideo.poster = poster;
            overlayCap.textContent = caption || "";
            overlay.style.display = "flex";
            overlay.setAttribute("aria-hidden", "false");
            document.body.style.overflow = "hidden";
            const p = overlayVideo.play();
            if (p && p.catch) p.catch(() => {});
          } catch (err) {}
        }

        function hideOverlay() {
          try {
            overlayVideo.pause();
          } catch (err) {}
          overlayVideo.removeAttribute("src");
          overlayVideo.load();
          overlay.style.display = "none";
          overlay.setAttribute("aria-hidden", "true");
          overlayCap.textContent = "";
          document.body.style.overflow = "";
        }

        if (overlayClose) overlayClose.addEventListener("click", hideOverlay);
        if (overlay)
          overlay.addEventListener("click", (e) => {
            if (e.target === overlay) hideOverlay();
          });
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") hideOverlay();
        });
        try {
          if (vPlay) {
            vPlay.addEventListener("click", () => {
              try {
                if (modalVideo.paused) {
                  modalVideo.play();
                } else {
                  modalVideo.pause();
                }
              } catch (err) {}
            });
          }
          if (vProgress) {
            vProgress.addEventListener("input", (e) => {
              try {
                const val = Number(e.target.value || 0);
                modalVideo.currentTime = val;
              } catch (err) {}
            });
          }
        } catch (err) {}

        document.addEventListener("click", (e) => {
          const b = e.target.closest(".img-btn");
          const t = e.target.closest("img.thumb");
          const target = b || t;
          if (target) {
            const src = target.dataset.img || target.src;
            const caption =
              (target.dataset && target.dataset.caption) || target.alt || "";
            const isVideo = /\.(mp4|webm|ogg)(\?|$)/i.test(src);

            // If it's a video, open directly in the in-page overlay player and skip the modal
            if (isVideo) {
              try {
                const poster = src.replace(
                  /\.(mp4|webm|ogg)(\?|$)/i,
                  "-Cover.jpg",
                );
                showOverlay(src, poster, caption || "");
              } catch (err) {
                try {
                  window.location.href = src;
                } catch (e) {}
              }
              return;
            }

            // reset both
            modalImg.style.display = "none";
            modalImg.src = "";
            modalImg.alt = "";
            modalVideo.style.display = "none";
            try {
              modalVideo.pause();
            } catch (err) {}
            modalVideo.removeAttribute("src");
            modalVideo.load();

            modalImg.src = src;
            modalImg.alt = caption || "Change image";
            modalImg.style.display = "";

            modalCap.textContent = caption || "";
            modal.classList.add("open");
            modal.setAttribute("aria-hidden", "false");
            document.body.style.overflow = "hidden";
          }
        });

        function closeModal() {
          modal.classList.remove("open");
          modal.setAttribute("aria-hidden", "true");
          // clear image
          modalImg.src = "";
          modalImg.alt = "";
          // stop and clear video
          try {
            modalVideo.pause();
          } catch (err) {}
          modalVideo.removeAttribute("src");
          modalVideo.load();
          modalVideo.style.display = "none";
          // hide/reset controls
          try {
            if (vControls) vControls.style.display = "none";
            if (vProgress) {
              vProgress.value = 0;
              vProgress.max = 0;
            }
            if (vPlay) vPlay.textContent = "Play";
          } catch (err) {}
          modalCap.textContent = "";
          document.body.style.overflow = "";
        }

        modalClose.addEventListener("click", closeModal);
        modal.addEventListener("click", (e) => {
          if (e.target === modal) closeModal();
        });

        search.addEventListener("input", (e) => filter(e.target.value));

        // Expand entry media if URL hash targets a version (e.g. #1.0.0 or #v1.0.0)
        function openEntryFromHash() {
          try {
            const raw = decodeURIComponent(window.location.hash || "").replace(
              /^#/,
              "",
            );
            if (!raw) return;
            const idsToTry = [raw, "v" + raw];
            let target = null;
            for (const id of idsToTry) {
              const el = document.getElementById(id);
              if (el) {
                target = el;
                break;
              }
            }
            if (!target) return;
            // ensure visible if a search filter hid it
            target.style.display = "";
            const toggle = target.querySelector(".img-toggle");
            if (toggle) {
              // only click if thumbs appear collapsed
              const firstThumb = target.querySelector(".thumbs");
              const isCollapsed =
                firstThumb && firstThumb.classList.contains("collapsed");
              if (isCollapsed) toggle.click();
            }
            // scroll into view after a short delay for smooth behavior
            setTimeout(() => {
              target.scrollIntoView({ behavior: "smooth", block: "start" });
            }, 120);
          } catch (err) {}
        }

        // open on initial load and on subsequent hash changes
        window.addEventListener("hashchange", openEntryFromHash);
        // call after a short delay so initial layout and conversion logic have run
        setTimeout(openEntryFromHash, 80);

        // I'm finally free from ts bro
      })();
    </script>
  </body>
</html>
